#!/usr/bin/env sh

i="$1"
: ${i:=3}

backlight="$(keyboard.brightness.handle)"
if [ "$?" -ne 0 ] ; then exit 1 ; fi

max_brightness="$(cat "$backlight/max_brightness")"
actual_brightness="$(cat "$backlight/brightness")"
step="$(($max_brightness / 100 * $i))"
if [ "$step" -eq 0 ] ; then step=1 ; fi
brightness="$(($actual_brightness + $step))"

if [ "$brightness" -gt "$max_brightness" ] ; then
brightness="$max_brightness"
fi

echo "$brightness" | sudo /usr/bin/tee "$backlight/brightness"
