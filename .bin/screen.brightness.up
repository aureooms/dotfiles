#!/usr/bin/env sh

i="${1:-3}"
s="${2:-100}"

backlight="$(screen.brightness.handle)"
if [ "$?" -ne 0 ] ; then exit 1 ; fi

max_brightness="$(cat "$backlight/max_brightness")"
actual_brightness="$(cat "$backlight/actual_brightness")"
step="$(($max_brightness / $s * $i))"
brightness="$(($actual_brightness + $step))"

if [ "$brightness" -gt "$max_brightness" ] ; then
brightness="$max_brightness"
fi

sudo /usr/bin/tee "$backlight/brightness" <<< "$brightness"
