#!/usr/bin/env sh

i="$1"
: ${i:=3}
s="$2"
: ${s:=100}

backlight="$(screen.brightness.handle)"
if [ "$?" -ne 0 ] ; then exit 1 ; fi

max_brightness="$(cat "$backlight/max_brightness")"
actual_brightness="$(cat "$backlight/actual_brightness")"
step="$(($max_brightness / $s * $i))"
brightness="$(($actual_brightness - $step))"

if [ "$brightness" -lt 0 ] ; then
brightness=0
fi

sudo /usr/bin/tee "$backlight/brightness" <<< "$brightness"
