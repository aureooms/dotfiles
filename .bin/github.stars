#!/usr/bin/env python3

"""
    Outputs the total number of github stars of the repositories owned by
    a given github user.
"""

import sys
import json
from functools import reduce
import github

if len(sys.argv) < 2:
    sys.exit(1)

user = sys.argv[1]

first_page = github.api('/users/{user}/repos?per_page=100', user=user)

stars = 0

for page in github.pages(first_page):
    stars = reduce(lambda x, y: x + y['stargazers_count'], json.loads(page), stars)

print(stars)
