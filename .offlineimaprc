[general]
pythonfile = ~/.offlineimap.py
accounts = personal, riseup, ulb, gmail
ui = ttyui
# Controls how many accounts may be synced simultaneously
maxsyncaccounts = 4

[Account personal]
postsynchook = notmuch new
localrepository = personal-local
remoterepository = personal-remote
status_backend = sqlite
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10

[Repository personal-local]
type = Maildir
localfolders = ~/mail/personal
# Spaces in pathname are bad. Lets use `archive` which is a simple word
# Besides, we only need `Tous les messages` folder.
# Sup would manage mails on its own.
# If your GMail language setting is not English, you can execute
# `offlineimap --info` to find out the name of folder which is
# translated and encoded after your account is configured.
nametrans = lambda folder: {'archive': '[Gmail]/Tous les messages',
                            }.get(folder, folder)

[Repository personal-remote]
# IMAP with hardcoded GMail config
type = Gmail
# The path of ca-certfile might be different on your system.
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# Remember that GMail requires full mail address as username
remoteuser = aurelien.ooms@gmail.com
remotepasseval = subprocess.check_output(['pass','google.com/app/mail/aurelien.ooms@gmail.com']).strip()
nametrans = lambda folder: {'[Gmail]/Tous les messages': 'archive',
                            }.get(folder, folder)
folderfilter = lambda folder: folder in ['INBOX', '[Gmail]/Tous les messages']
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes

[Account riseup]
postsynchook = notmuch new
localrepository = riseup-local
remoterepository = riseup-remote
status_backend = sqlite
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10

[Repository riseup-local]
type = Maildir
localfolders = ~/mail/riseup
nametrans = lambda folder: folder

[Repository riseup-remote]
type = IMAP
remotehost = mail.riseup.net
tls = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
remoteuser = aurelien.ooms
remotepasseval = subprocess.check_output(['pass','riseup.net/aurelien.ooms@riseup.net']).strip()
nametrans = lambda folder: folder
folderfilter = lambda folder: folder in [ 'INBOX' , 'Trash' ]
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes

[Account ulb]
postsynchook = notmuch new
localrepository = ulb-local
remoterepository = ulb-remote
status_backend = sqlite
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10

[Repository ulb-local]
type = Maildir
localfolders = ~/mail/ulb
nametrans = lambda folder: folder

[Repository ulb-remote]
type = IMAP
remotehost = imap.ulb.ac.be
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
remoteuser = aureooms
remotepasseval = subprocess.check_output(['pass','ULB/aureooms']).strip()
nametrans = lambda folder: folder
folderfilter = lambda folder: folder in [ 'INBOX' , 'Trash' ]
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes

[Account gmail]
postsynchook = notmuch new
localrepository = gmail-local
remoterepository = gmail-remote
status_backend = sqlite
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10
synclabels = yes
# This header is where labels go.  Usually you will be fine
# with default value (X-Keywords), but in case you want it
# different, here we go:
labelsheader = X-Keywords

[Repository gmail-local]
type = GmailMaildir
localfolders = ~/mail/gmail
nametrans = lambda folder: folder

[Repository gmail-remote]
# IMAP with hardcoded GMail config
type = Gmail
# The path of ca-certfile might be different on your system.
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# Remember that GMail requires full mail address as username
remoteuser = aurelien.ooms@gmail.com
remotepasseval = subprocess.check_output(['pass','google.com/app/mail/aurelien.ooms@gmail.com']).strip()
nametrans = lambda folder: folder
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes
